#!/bin/bash

function fullbackup() {
echo "========================================="
echo "        MySQL Data Backup (Full)"
echo "========================================="

#perform full backup

innobackupex 				\
--ibbackup=xtrabackup_55 		\
--parallel=8 --user=$mysql_user 	\
--password=$mysql_pass 			\
--no-timestamp 				\
--host=$target				\
$current_backup_f 2> $logfile_f

# see if the backup completed sucsessfully
if ! tail $logfile_f -n 1 | grep completed.OK
then
        rm -R $current_backup_f
        echo "\nERROR: backup failed! (log: "$logfile_f")"
  exit 1
fi

echo $current_backup_f > $backup_directory/last_backup

echo "Backup Completed OK!"
}

  #-#-# 
  #-#-# 
  #-#-#
